{"componentChunkName":"component---src-templates-blog-post-js","path":"/SEEDlabs/environmentvariables/","result":{"data":{"site":{"siteMetadata":{"title":"KunheeKim.Dev","author":"[Kunhee Kim]","siteUrl":"https://kunheekimkr.github.io","comment":{"disqusShortName":"","utterances":"kunheekimkr/kunheekimkr.github.io"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"19f448c3-a992-5248-9355-bf56f8ba32f5","excerpt":"Lab Instructions Task 2: Passing Environment Variables from Parent Process to Child Process The objective of this task is to study how a child process gets its environment variables from its parent. We would like to find out whether the parent’s environment variables are…","html":"<p><a href=\"https://seedsecuritylabs.org/Labs_16.04/PDF/Environment_Variable_and_SetUID.pdf\">Lab Instructions</a></p>\n<h2 id=\"task-2-passing-environment-variables-from-parent-process-to-child-process\" style=\"position:relative;\"><a href=\"#task-2-passing-environment-variables-from-parent-process-to-child-process\" aria-label=\"task 2 passing environment variables from parent process to child process permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Task 2: Passing Environment Variables from Parent Process to Child Process</h2>\n<p>The objective of this task is to study how a child process gets its environment variables from its parent. We would like to find out whether the parent’s environment variables are inherited by the child process or not.</p>\n<p>Write the following program <code class=\"language-text\">pass_env.c</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 957px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 103.33333333333331%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD8klEQVQ4y32Ta1caVxSG5zf2S1KXK/2U1GiDGkyjdmXZ2rQpKCJaqwkmYkAxUbkJiCD3+/2OXAQEBa//4e0+oxB0rfbDs/acNXOeefeeM1y/qoInygr6FCX0r5fwA637VCd4rCRUtzyi60eqb+vHqgb6Npro32qhb7OJ7+n+E3UDr5QhcK+FY3gxPADB2DCeDw/i6dAzDAoGMNQDu89g1+ze8xc/YnRMgF9/f8PXESFB+58JxsH1C8T46e/PEK6oIZSuQsCQb92y+gUjq1uYXPuKX9a3IVzbxsu1nS5CxW63jhETsnVwc1IF3FYv/CYr0l+3kbHakE6lkUqlkE6n78ggm82hkC+geFREuVRGuVxGpVxBpVJB9fiY6jFWPmvBvZPMwxs6hMNrhcNhh9lshtPpRCgUQjAY5GHX4XAY0WgU8XgciUSCf2HnpdlMBimqryRqSigWwx10wGQy4eDgAH5/oCvpiBiRSASxWAzJZJKHyTIkymSzyOfzfAeCN2Jw//w1i2AiSG0fkiiACKVgSVhlkl4hS9dJxcsybBRMmEM2l8f00iY4+ScV/L5DGPR6GA1G7FsssBMurQ5Ol4sXMTrtsnSd2TIZI5fLkTyLWekHcBPzSvhcdmrZDK/bA6/HA7vdDgfh9fnuydjsOsJOOiY7Ojrir0Wzi+DmF6VI0oOBQOBeGjYvxv/J2OwKhQJKpRJfJUsKcCKZBK6gBzabnT6I/54gkbj/RZmIJWIwQbFY5GXsCLGUb6dn6CsvKalNK2wWMzQaHWx2J9weH1xuL2LxZHf4vZIOTMZgZ7FYLGFG9hHcilyNFH1lo2YH1n0L/KEoAuEY1RjiyfS91liKTiL+YJOoQof6mCjRWvZRA044KUWxkILBoKOD7YUvnEQkkUGMiCbu/pAHMiZiklqtxlOv1/k/ZW5hDdzohIQeKtAMHQj4Qkimc3yiPEnyPS32yqrVKk9H2Gg0qNaxrDKD++7pJMrHRf4/5ZMUCt1EvXN6KOsVnpyc8GuJTMESzqHZqHVbeyj7rxaZhMHSNZsNEtYgkcrBDY9LUK9VkEimugf125G4G3yPsF6/FTWbpzg7a6HVavO1ftLAe9U+uPGpRdxctyhJiTZUaEOV3lqjDXWcnTZoQxPt9inP+fkZLi/auLho4eqyjZubS1xdneP6mri6wKr6ANzIzzP4IN/A8vsN7Gpt0OoOodXboTM4oN9zYs/khtHshXHfB7PFD4stiENHBAe2EHR7bjg9Kbh9ORitYcwsb4ObXfiC396p8Fa8CZF0G6L5nTt2ISZEMg3ECzpCj5lFPabn9/BSZMBrsRZjf+ow+IcOA1MqjE5tYWhSjn8BdHVJuYBU6+MAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2-1\"\n        title=\"2-1\"\n        src=\"/static/d3e679541bbaf1afe04751afe00690bd/6bff2/1.png\"\n        srcset=\"/static/d3e679541bbaf1afe04751afe00690bd/5a46d/1.png 300w,\n/static/d3e679541bbaf1afe04751afe00690bd/0a47e/1.png 600w,\n/static/d3e679541bbaf1afe04751afe00690bd/6bff2/1.png 957w\"\n        sizes=\"(max-width: 957px) 100vw, 957px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>The following program is supposed to print the environment variables of the child process.</p>\n<p>Since the output contains many strings, compile the program and save the output into a file, <code class=\"language-text\">child</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 956px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 103%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEWUlEQVQ4y01UZ1cbVxDdX5mAY+eQk0MJRcKAc7DpoogSoxgDokistNKqgSpFDSShLnrv3fkfNzNPguTDPfO0u+/OzJ07kn6x3eK9coMq+RLVhA90rrY94meFwNH2JPBTJVZVYrX6jPfOf/BOfaH4gl9dP6A1pyF1trehpfUPtHZo0dzahLqmWjRqGtCkrYDOLZp6gcaWOjQ016KBvtF8bEKfrhva9ma63whtWzPGRocgVTWP4PdJI+pnbPgwbkTN10XUTsn4zWBCzeQiGqat6FxyC7TLK2i3+tBRwSfFT5FAkc/d3y2Q9OOzcKo2uF0uLMzPYWV5BeH1Dfi9XqyFQoiGI4hFYygWijg+OsL15SVurq9xe3MjcHd7K/D4cI9vSwFIn7uHoNptsNtV+P1+rK2tIxKJYH19HfH4JnZ2dlAqlbC/v0fYxx7h4OAAh0R+RDg+PhY4OztDV88EpP7OPqhOB0yLJqiqilBoFdFYDPFYHNFoFJlMhpBFNptFicj58snJyRtOT08F2SVV/rFzANLQn91QVDtMJhMURYHZbIbP5xNVcrUhapuT8HlzcxPFYhH5fF5UzmT/J5zQT0MaHjUQiQmyxQJ5aQkez7KoMJVKIZFMYnt7W5w5ptNpEROJhKj8lZBxfn6OaRquVPflL9gtZszMGiHLFnhpGIFgEMFgSFQaDodFRflcnqoriZb5MuO1uouLC4GpMQOkL71dsFGrimLD8vIyEfoEgkS6wuQ0qEAggNXVVdHy4eHhm46vxNzu1dUVDNNkm+H+AagOp5gyX9za2kKK2tquQAyDpvyq0yuY4Iatw7a5u8P9/R2+Gu2QdCPf4XKqNGEHnM4yscvlhtVqJT09bwNiHZOkKWvHSYqFAklRQC6XE8/49zc5CKlvcBKhoB8RsgjrxS/5Ix4AT5QvM9LCPvwujwJd5ncFMvvu3p44s0cnzUT4rqYNy55yZRZZFvolkykaQk4MgwlyYiDlS8LcRMIy7OzsUqv3eHl5wdPTE6ZMHkg1dZ/h83pEu9war1kykRRm5kq4imw2JwhYr/80u8fDwwMeHx/x/PwsSHUGBVK9ZgCRjVVhXh4IrxtrFedticcRp8nGaGu2tsh7JEOy4k32IkfuhiVhmXSTRNig1VFFcbERvGocWUuxKWQVjkwcowScMJHYEr/L5wQRJoTem/RsYtZNxm7pp8xJ8tka/TkEhNdE6/HytoTIj1nKniAZOCHLsEld8LvDwyMRucJdWkXDgheS5pMehXyKSMJU2Tp9QBm3qeV4lDKzlrR29Cyb3aZBZUTMpFPiXCzmUSIU8xnslHKYlunvq7ltGHNzFhj+XoBxTsH0jIy5BRvm5hXMGq0wztswv+jAksUDs+wuxyVyhSMIG8HuCMHh3oDFHkTPOGnYr5fRO6QQrOjSydCNOtA7bEMPPdONOelsR6/eAd24B70jDnTpPdAMedGqc6FtcAVNg35oh93oGgugY1DFvwBmBEkLoHbEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2-2\"\n        title=\"2-2\"\n        src=\"/static/86d73971e6d4bd41b3acfe8f67a31dd8/7b1dc/2.png\"\n        srcset=\"/static/86d73971e6d4bd41b3acfe8f67a31dd8/5a46d/2.png 300w,\n/static/86d73971e6d4bd41b3acfe8f67a31dd8/0a47e/2.png 600w,\n/static/86d73971e6d4bd41b3acfe8f67a31dd8/7b1dc/2.png 956w\"\n        sizes=\"(max-width: 956px) 100vw, 956px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>We can see that the environment variables of the child process have been written in the file <code class=\"language-text\">child</code>.</p>\n<p>Now change the program <code class=\"language-text\">pass_env.c</code> so that it prints the environment variables of the parent process, compile the program and save the output into a file, <code class=\"language-text\">parent</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 957px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD+UlEQVQ4y22UeVcaVxiH53NmO6amSdSoRz3RhrSxOY1aNzAmak1i1QBGUkFcoLINMMiw7woOqywusSenH+HX944MpTZ/POfeOcN95ve+93K5e7o8OrQS7qzlcJe4T/O7+gpu6Sq43eSWrv35VB7vbFTRYTjDvU81dGzWcN9Qx5AuAm54YADdvd+jd6gXj/q78F1XJx71PPgPPU+uecyeux/gYXcnevof46eXKvQN9tC8C70D3Xj45Cm4233T6FvUYWjZgGHNCgZfr2JgdQuDq8Zr1oz4UWvCqH4bI1oznhLD2p22cQfDuh2M6HehWtCBm5tbh88uIGC1I721hYydxkQCKSKdZCSRIjLpNLJHR5ByWRSkExTzkkypkEcpn0e1Usa6YR/cq2k1fCEXeJ8dvJuH1Wql0Y1AMAgxEECACNI8FAohEokgFoshHo8jQR9JMlIpmezxMX5eNILTTE3CG+BhsVhwYDvAod/fkigiRjgcRjQaRZySJwgmS1PqTCYjk6e0qvF5cAsT0xDjIjx2BwKiKC9kScIMmt8UMlGKEjFZu1CiNsz8vgVu+YMWop/H3u4OLLv7ODiwgbfZ4DGb4fZ4ZJECK5el+5Ywl8thYWkN3DONFoduJ/apZJ9HgOAV4HQ6wTuc8Pl8rcSt3rUJmeiINuqY+iednGD+7Xtw6nkN/TAGsVmuImDlMW7K2nvHRNlsVk5XoN1eXNkAN/V6Bp4gpXK44KcNUQQJEsSbJJs7ykQskZKKiSRJkimVStDMLoCbfrMOQbDDcWCFybQNh4uHVzik/gmIxuKtXjEJS3NCpTERGxVZns5hmYRvlz+yTdlEMhGC/U8bXLwfbn8UYjAKf5DKjiebpR21SlMECoVCQaZcLuGd3gJu4JkaJ9kEzKbPcLGywwmEYilE4ml5TGf+L2OCYrFIknKLavUUS+/04AZJWJCOYd23wOtyIcX+YiRQuFmeImM9U2Snp6eo12pY+8MOrrN7lOqXqKzrxe2idll7MiZThJVKRaZer2Hp/Sa4/pFZ1Kpl6tXRN1PdFLWnYlSr1euEJFz8TQuub2QGlXKBzlhSlrbvpiT923SlZ5XKtahWq6PROMP5+TnqjQbNG1hnJQ89n8NfVw066TkU2VVUKtAHSrSoTMlZKVU06OuNRg1nZ3VcnDNJA5cXZ7TuEldfLvDl8hx/f73ChtlNQpUam4ZtaHVGum0E2Bw+2J2HdB79cPIieE8Qbm8YHiECry8Knz9O11oCfjFB7+lWCmcQjOQgiCm8WTGDG5/6iOejH/Dil1WMTX3C+PRmEwMmZojZz5hQG2UmNSa8UpsxMmmGamobw2NGDP26B5V6Dy9n9/HDmB7/ALh6TXBjGsR2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2-3\"\n        title=\"2-3\"\n        src=\"/static/2b25d55fc5952c1ba6ad1bbfb220371f/6bff2/3.png\"\n        srcset=\"/static/2b25d55fc5952c1ba6ad1bbfb220371f/5a46d/3.png 300w,\n/static/2b25d55fc5952c1ba6ad1bbfb220371f/0a47e/3.png 600w,\n/static/2b25d55fc5952c1ba6ad1bbfb220371f/6bff2/3.png 957w\"\n        sizes=\"(max-width: 957px) 100vw, 957px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 958px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 103%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEVklEQVQ4y1VUWVdaZxTln/Wlj+1Du9o0WpMuTWI0oGgwNaykBq0m0UTtUqOoCLkMXogyDzLKPKigOMRZUdv/sXvOJ7jah73OuRe+fYa9v6tolk7wwHyKJtORQAs9N1lquGeu4RdLA1e4R+B4vx6bbNdokf9Bs+0GD+QbPLT/jW8XLqF4qelDV08n1H1qdPUq0a58gmfdHVCq66Bc1f0UXYRnXe3oUD1BB/2nm/77Zug11BqVONf9XIXvNBNQ3Fe+x6OJOTz9ZMbDD3r89nEBj6dMaJs0CLRPS3hpdEBrtENjWoFGcqGvjhdmN0UCRc6/+cMOxcjoLORlK77Y7Vicn4fD7kAoGITb5YLf58NaKIQQoVgoorqzg5OjI5yenODs9FTg/OwMF4TLiwtoDBkoNP06yPIyLBYL3G43/IEAwuHwXdzY2ECpVEK5UkalUqFYwfb2NnaIvFqtorq7i729Pezv76N7LgHFq14tZIcDhsVF2Gw2eLxehCMRxGJxRKNRZLJZ5HI5ASbfrRM0wEQHBwc4pM7V8ykoBnt+h1WWBSF3aTAYsLq6KroLBgPw0dh+f0CMH4vFRLeFQkGQ/4/w8PCW8M+3E/hsMsFoNBJMWFlZwdpaGOl0Guvr68hkMiJPpVKiW86T9D5LOZM1CL9+/Qq1ngh/7RuFwyphZmYGS0TodDrFLr1en4jBYAh56iifz4vueOQGgSCsd3fXYb+WRrbaIEmS6M7pdAlSn88PFynt8XgIXirgRTweF2I09tggPqb9HR8fo2eBVB56PQCZrNJQOUaHeDwejcGjFYslcfiIDjbABKdsHbLM+fm5QK8hB4VueIo6uyWUZTuspLRMIkmSGU4SpyFQMpmknSZFAVacx+fIAmUpFotFdC0WyTa6cfi8bkTIKqHQmjjA+8pkskJJPnT7nKl3WxTg3wpk9nK5TPmmiD3mKhTf/6ykThzkwWWhNu+R1eXKfFAQcs7mLt+amg1eIsKtrS0x8s3NDWpXV3hhLEHxU8tz8phbCMOjRSJRJBLrd6oyaSP/784u6KpdXl6iVqvh+vpaoH8mAkVzmxbx6JqwSSKRELeDO2QTs6ocY/SO83Q6I3bZ8CLHeDxBBQs0SRado24ifKRFOhUXNuE9+sge7D3Og/SR4MhFuHsumEolBTkXjdMzv2NROD7+K0afr9Z+5HMpIQj7rnGYibiDYCCIJNmIrcQ3iMVgMu60UtlGKpkisXJir22TcShaOwewWcoQQRjRyBpVihIRdxGlP6aoGF+7hMgLBbJJPoNcNk2fsyw9Z1Eq0n6LOWxuFKCcpZvSrhqEXi9hfHIes3ozpqaXMP3JBP28FbNzdCVnJegXbFgwyAQ7lkxf6IqSb61ufLa4IFk8cKxGYJb9+EEXoA/sBzMG39kw9N6KNyNmDI/JGBpdhu6dFSMfHRikfHDMjpFxJ+V2DIytouetG70jMjTDLqiGPWjVmqB6ZcOPuij+BSf6AncyvEmKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2-4\"\n        title=\"2-4\"\n        src=\"/static/0ee736e2925795f569ac89be31686b3b/b97f6/4.png\"\n        srcset=\"/static/0ee736e2925795f569ac89be31686b3b/5a46d/4.png 300w,\n/static/0ee736e2925795f569ac89be31686b3b/0a47e/4.png 600w,\n/static/0ee736e2925795f569ac89be31686b3b/b97f6/4.png 958w\"\n        sizes=\"(max-width: 958px) 100vw, 958px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>We can see that the environment variables of the child process have been written in the file <code class=\"language-text\">parent</code>.</p>\n<p>Compare the difference in environment variables of the child process and parent process by comparing the content of <code class=\"language-text\">parent</code> and <code class=\"language-text\">child</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 950px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.666666666666668%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABUElEQVQY003OyU7CUBQG4L6liQuhDG2ppeAQhZVbWYjEaMSQuKAoxCGBoGnENUMnplJKqQGDvsfv5YKExZf/3Omcy0QrPoSyh4jiIkzwjxNEKjOw5TlCa+waXVe+N7iXX/AE97SA8LyA+PoD5iQhQ5LCiCdjkGQOUT4IQQwhJrIkWZIhiCTFGNkXguCEAHiC4wNIpw9wmkpiX4pQcoIHsxM/B5vNg7spYe+igN3MLdjcPaLXRSpIajlfwtlDFSmlisNiFUdKbWVZF2vUsbLCZLIFfKjvUFUVb/U6zc9GA6ZhwNAN6JoGy7RgD4dwRiO44zG8yQRTz4M/nVJfvk/NZzMwuasCLMtEq9WGRh7ruk6z0+lQy1rTVvXyzDRNdLtd9Ho99Pt9ajAYYEgGjshAJnd5Ry5YaDZbaLfbm0bb/gcZ5Nfbzf4b2bYNx3Hgui7+ADdUZZikKy5vAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2-5\"\n        title=\"2-5\"\n        src=\"/static/8f6f2422df5e8e7f99ae405f92f03120/906b5/5.png\"\n        srcset=\"/static/8f6f2422df5e8e7f99ae405f92f03120/5a46d/5.png 300w,\n/static/8f6f2422df5e8e7f99ae405f92f03120/0a47e/5.png 600w,\n/static/8f6f2422df5e8e7f99ae405f92f03120/906b5/5.png 950w\"\n        sizes=\"(max-width: 950px) 100vw, 950px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>The result shows that the environment variables of the child process and parent process are same. This is because <code class=\"language-text\">fork()</code> creates a new process (child process) by duplicating the calling process (parent process), and all environments of the parent process are inherited to the child process.</p>\n<h2 id=\"task-3-environment-variables-and-code-classlanguage-textexecvecode\" style=\"position:relative;\"><a href=\"#task-3-environment-variables-and-code-classlanguage-textexecvecode\" aria-label=\"task 3 environment variables and code classlanguage textexecvecode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Task 3. Environment Variables and <code class=\"language-text\">execve()</code></h2>\n<p>The objective of this task is to study how environment variables are affected when a new program is executed via <code class=\"language-text\">execve()</code>.</p>\n<p>Write, compile, and run the following program. The following program executes a program <code class=\"language-text\">/usr/bin/env</code>, which prints out the environment variables of the current process.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 956px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD0UlEQVQ4y2WUWW8bVRiG5xJxhZD4L4gL4JJKlUBIRI1VChehaRynBieOCVuKUFGTuGmInYRs2KkdKmgolCa24/ES11bG+zLexvsWKIEf8fKdk0zrJBePZnTkeeb9lrFwfVPCh846rjmq0NgVXCU+ctYw6GzjioPRwsBWEx9sNTgD7Gpv8LMr9BvNz11ottu4+uAIQ84yBOPXZkwaDBjVj2BsQo9hvRZDo9cxcvPGc7SETn+C9vTshm4YxqkJfHXrC9w0jGHMoMO4aQLCe0MWXPvMDP3KNkxrv8A0v47xpfsw2HYw/tNDuj6EkfjG8RumnY8weZ/xO8fkYPwBE91/vv0nJjd+hfDJpzNY+GELT8UwpF0P5J0dyKKIXDZHZDlyLscp5AsoF4uoKApqlQpq1epzOu0W4ok0JRzUwrxoQTjmgz/shej3weV2IxQKIRqNQpIkDruPxWJIJJNIpVLIZDLI0stUSvSipxEJwseXNJidM8MX8sHr9dKDLwQqTMSIx+NnZDmWXJY5LPVhNAFBd3kQ8+a7CCfDcO+5cBDwI9YvOxUymSpkMlWUz+dPhBWFEsYgjEzegWXZBs+Txwh4PIju7iJKSePUxxiljVOJ8fiJMJFIIJ1On0nHhURFKSMQopJfe3cKxtkNBMV9BFxuSE92IYk+hA9CCHhFSH4/pCj1LpG8UC6TMQqFAqqU8DCWgqC5NIjlFQt8BxGI+34E/STaDyIQDMMrBhH0hRCMRGkYF2VMVCqVOPV6FYfxLA3lfS0W5heRzcSQpBJTmTRSVJZaWoZNkURMooqKNFFGuVyGQsNQlApazTpC0RyE4dHvsLT2gN4m84fZQ1x0mkbu69VZiUKDqHAUgu2hPxyF8M6AEQtLDpRLBZ6qfxX6e8RkrDQmqtIiM2q1GpVaR43otJuIJCih8NLrmPjyHhr1CjU9zUWqoF+kJmOJVFGj0UCz2eT0el0k0nkSvvIWpm5ZqQc1XvJ5Sb+IwZKpsn7hX0c9JDOFU+G3VvS6LSrvxdTOp+ov8byMJ+x2kJHp70t49W2YphfRbtWp3IsT7JepklarhVa7jU6ng263yzmihBlZIeHLb5DQgl6nyftXLquNr1CaGgkaJGhy2jTJLiVh/er1enj27G8cHx/z63///oNSpQHhzcs6zMzbUCwU6fNK0QLTHqaynHRGptXJIycX6fMqUUtKKBQVagetilKlfpf5WbXapAoaiLA9nL6zgunbP+L7OTtm723DuvoIy+uPsWbbO4vdjVWbC+tbHljtIuY2RJhX93Db6sLMpoiFTQ+W6Px/N/EAtPJ5HKkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3-1\"\n        title=\"3-1\"\n        src=\"/static/d62b8b526fafcbe387595aab736a30d5/7b1dc/1.png\"\n        srcset=\"/static/d62b8b526fafcbe387595aab736a30d5/5a46d/1.png 300w,\n/static/d62b8b526fafcbe387595aab736a30d5/0a47e/1.png 600w,\n/static/d62b8b526fafcbe387595aab736a30d5/7b1dc/1.png 956w\"\n        sizes=\"(max-width: 956px) 100vw, 956px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 956px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABs0lEQVQoz43N7UtTYRjH8fMfRs+jhQSGOWfijqY9gYRoMAnFhk0s0XO24XBhc1LWCxfl2c7Z43naVulmPvR3fLvPOYIFvejFh9/FxX3/LimkdgmneoSUrs+bb6ROuKKeclU9OXfKtVTgsnLMpbWf/v56+iwg9qHMGeGNX0hPJieRRyPIsSix0SHuDw+IjDAuRxkTvJRjQ/4ueBfkmNjNTD/l2dRDJsZHmHgwwuNHMtKt4Vn65hL0v1znzvxrbj5P0PdihfBckttCOJ4ksriKnFSILincTSgMLKm+wVcpIc298xxMppGmZhKomTTp7CZv1hVW1QyFDx/Z2f3E23yB7fe7fNFKaGUdTa9QNW06B4dC1/ftsMd34UfviIOjY6Tp2Xm281vk322xmc2Sy+XYKRQo7u3xuVhkf/8rhl5GL5epGAb1WpVmo47ZbGKZHhPbMnFsi5brIC3EFzEti7L4YFQqVATDCDKYDZ83V2s1Go0GTVHmscQ/23ZwHIdWq0Wn00FaiS9QFxdKmuaX6rr+lz8La6Lwosj2eWVBYRtXpLS8vCau1imVSv8s+t9C13XptNv8BuRJ5v2dUoUGAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3-2\"\n        title=\"3-2\"\n        src=\"/static/8707b0c19434a41536a334690c329e37/7b1dc/2.png\"\n        srcset=\"/static/8707b0c19434a41536a334690c329e37/5a46d/2.png 300w,\n/static/8707b0c19434a41536a334690c329e37/0a47e/2.png 600w,\n/static/8707b0c19434a41536a334690c329e37/7b1dc/2.png 956w\"\n        sizes=\"(max-width: 956px) 100vw, 956px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Nothing has been printed.</p>\n<p>Now, Change the invocation of <code class=\"language-text\">execve()</code>as following, compile, and run the program.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 957px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD30lEQVQ4y22U2W8bVRSH5xHxBEj8L4iX9oWHPpRFSKVNyiJVdYKTKuA0ipMi2iahlCV1wDbBaeuoSRxIUUvJYsfj2I53j3ePHXu8r20ogr/hx7k3nmCFPnw6oyvd755zz7kjaKwRDK6W8eGDEi5YCxhYLuCjlTLOrzbwwcp/nOvRvzZga2NwvYNBWxMXf+lCs16GMPHF95jU6aAdG8aVq2PQjGlxSXsZw6MazhCLVzQY6THUW9OMXMa4XofpL/UY/XwEI59podNfhfDuJSPOa29h7Ccb9EsPMXXnLiYW1zDx4PEx+pXHuGl7gpn1PzC1Rtg2j5le3+Lx2q87mLz/G4Qh3XcwGKwIuPyI7jghP3oE2eVCNpNBNp2GTJGTzSKfy6F4cIBSsYhKqYRqmVHmtJt1SLEkhLfPDePbH4wISG64AyJcbjfsDgf2fT5EolGEIxFEIlFE6VuKxRBPJJBMpZCiwzJ0UCaT5RQKB/D4whA+OTMA0/wdePxuiKKIKBdEuEBFkiROjITJZBLpnixLWcuyzCmXFATCMQjaswOwGBYQSgRh37Zj3+OB1CdThUzGSFF2TKaKcnQNLJaU4pFwaOI2DGYrdjefwEulSltbkEQnYi4RUjiMRCKOeE8Wj8ePhWp2TMhQSOgPSRBef0cP/fwyfF4fRKcb+w4XPN4AfP4QvL4g9rxBBIJMnPhfuaosn8+jQg3iGV48cwFm8wLEPQ88jl2ERBeCDhE+txf2XREO5x4dsM9F/dmpokKhwKlVKwhFqcsfv/cpLIt3aTTiSEQj1L3UURf55jQfH1Wiig5odBhFGp8SjY+ilFCvVRGJpekOR+eweG+DTssh3dvIBCc7qYqYRFEUDpMdUeZCKZWH8Nb74zCYVlAs5F/YQbU0JmOlMVGZBplRqVRQrVY5rWYD4VgWgvDSGxi/ZqATSnTpKS5SBSpMpGbGMlJFtVoN9XodNeJpt4VALEfC105j6oYRzUaVl9yfDZP0ixgsM1WmChmHz7rwSTIJXzmFqZsmdNoN5Pq6djKr/hJPymo1Ej7twhOkORRePY3J6z+iUa8gK+f6ynyRrCdpNNBsNtFqtdBut9EiWIZBKUPCl9/E9IyZFlq8XDbxZfYXqVY4jUadNjc4rVaTKmmh02mj2+3g8PAZnj//k8d//v4LGbkI4dTZUVyfM8NPr8JLryIYjCIQICgmEhlOMiXTfOY4mSxVUChzMtkCXZOColKDUqphzxeHYKKfovHnh1gwbZDYgtnb9zHz9T3c+GqJxmkD1lXnEWsuLNsIireMv2PWvI1vFjcxZ9zBrMWOecs2Fpa28S+Kef8BdQq7tgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3-3\"\n        title=\"3-3\"\n        src=\"/static/88708895ee92dcc17e7b918ef98b4407/6bff2/3.png\"\n        srcset=\"/static/88708895ee92dcc17e7b918ef98b4407/5a46d/3.png 300w,\n/static/88708895ee92dcc17e7b918ef98b4407/0a47e/3.png 600w,\n/static/88708895ee92dcc17e7b918ef98b4407/6bff2/3.png 957w\"\n        sizes=\"(max-width: 957px) 100vw, 957px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 955px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEVUlEQVQ4y1VUWU+bRxT9+l71oYrUP9NWavtSqVUrpU2VhCUohRLAMWbfGohoAoQlNEoTKQHjBe9g431fMN4BY2zAxpggoFUf+idO7x1wpDwc3Zn5vjlz7z1nRnqgyqJZf4p7uhoaNVU0aatoofld3Tlur57jju4Kt0W8EOOf1ae4pX6HO/S9gf/RnqHZeIFftOeQBsfnMdjXj4c9XejuV6BL0YV22QOayz6AnL7L6ZtM0Ymu7k50yjswNDaA8clHtK8bff0P0Tb4CNLNtldo7J5B259v0Plah8aZv9Ay/watL5S4//wtWhbeoJ3GQ0sGjChNUCyZ0KtaR7+aYcWAxoo+iiM6G1pfWyG1KWbxZOYl9LpVmEwmrK6uwuVyIxAIwOPxwOl0YXNzE+l0BtlsFjs7OyiXyzg5ORGo1WoUa/jn/AyhXBnSrWY5hkYnodWosbKyAqvVCp/PJwg5hkJhQbK9vS1iPp8XKBT2sL+/L1DYL6JaPoAzvgfp3ncNmByZgN6ox9LbJWi1WhgMBrjdbgQDQXi9PgGfz49gMEiZpt8TFYtFlEolFEsHeFctw5MsQpL/cBfToxNQaTRQq9VQUZZqtYYIPYLA7/eLTL1e73XGIUQiEbHO5IeHh0RYwmmdUDY8i+m5l6JkpXIFer1ebI5Go6J3vJk37u7uClyVWxDZMQ4ODlAi1I6P4N4qQPrs5hhah2agUyuxvKwkYi20JAyLo9PpoFKpYDabYbc74CKB+KB6uUx2hUOcnVTgTuxDavi+CROPx2iznrIzkLJebMbj2NraQiqVQjKZRDKRoHlCqMzZ1YmOjo5QqVRQrhzj4qwGX/oQ0q8/dWHqjxnoDXqRDWdmooxYbbaRjSILxAfUFc7v7X0oSrGEWuWQVKaSO+RTePrsFewbVuE5p9Mp/MdwOBxCmLrCbKUQxXA4LPobZ9BBkUgUiVgYRn8G0o9NY3SFprFmoT4RgcVioT7FRHm5XE54jyP7kJG/FoYjr3O2VTL2JZUcyB1Dkj75Eo33B2AxG4Rd1ixrVKaNsgmKMpPJFBKJJGUUFwTcM+5dHdVqFReXl/jv378RzdcgfXTjG/wmG4fdtkZ9s1E5EZFhnITh0mKxmFBWlEXE9UzrYCtlsjmUSwXYIruU4adfoav3KaKRgOgfm9dut4so7jK1oX6v2czcwwBFP63VTR8mr25FQ1hZCxDhja/RoZhEYisGj/tKDL4N/DObmsculxPpTOb9LUmTnfz+AFJkeG4DV5LfycDo2iTCj79AZ88T8tqm8CALE6Uy+ScfkdZvC6+xP+PXHuV1JswSYYpeop1sCmZW+fNv2zExuQiPYwNmoxFOKte2vg43le8mcseGTYy95MUAv0J0LRk+Nz1r1NswtSBCL1I6HsWy2Q9p9LkBA1NajM2ZMTprwvC0AROLNppbaG4W49FZC35fsOHxCydFK4YWnFDMu9HzzIbeOS9kNB5esEO+GML/WrS4yWENPAUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3-4\"\n        title=\"3-4\"\n        src=\"/static/8a65f439a9cad9c64055cd82614d4c75/a0b80/4.png\"\n        srcset=\"/static/8a65f439a9cad9c64055cd82614d4c75/5a46d/4.png 300w,\n/static/8a65f439a9cad9c64055cd82614d4c75/0a47e/4.png 600w,\n/static/8a65f439a9cad9c64055cd82614d4c75/a0b80/4.png 955w\"\n        sizes=\"(max-width: 955px) 100vw, 955px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>This time, the environment variables of the program has been printed.</p>\n<p>The difference is because the third argument of <code class=\"language-text\">execve()</code>, which specifies the environment variable was different. Before changing the program, the third argument of <code class=\"language-text\">execve()</code> was NULL, so no environment variables were passed to the new program executed by <code class=\"language-text\">execve()</code>, and nothing was printed. However after the program has been changed, the environment variables of the current process was passed to the new program executed by <code class=\"language-text\">execve()</code>, and environment variables have been printed. In conclusion, to pass environment variables when a new program is executed by <code class=\"language-text\">execve()</code>, they have to be passed as the third argument.</p>\n<h2 id=\"task-7-the-ld_preload-environment-variable-and-set-uid-programs\" style=\"position:relative;\"><a href=\"#task-7-the-ld_preload-environment-variable-and-set-uid-programs\" aria-label=\"task 7 the ld_preload environment variable and set uid programs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Task 7. The LD_PRELOAD Environment Variable and Set-UID Programs</h2>\n<p>The objective of this task is to study how SET-UID programs deal with some environment variables such as <code class=\"language-text\">LD PRELOAD</code>, <code class=\"language-text\">LD LIBRARY PATH</code>, <code class=\"language-text\">LD *</code>, which are variables that influence the behavior of a dynamic loader/linker.</p>\n<p>First, build a dynamic link library by writing the following code <code class=\"language-text\">mylib.c</code> and compile it with the following commands.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 958px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACCElEQVQoz1WQ604TURRG5118IBITgxa1iIkRLJ0WEIokookKkRgViBhs0Uhpi79MqSlQem+HzpTpZXqhLQULPMjyzFAx/lj5dibnrPnOlqaCOvbAKSPBM+z+LsNbXUYCZwwFzgUX3A1eXhG65PbmbwbW6gx+P7PmO/4etq1zK+8HegyKb9LzNyvMTHtwuh04J2TGZAePx0fF7OwzbiFbOHFNyVaOuxzMzT/j5asXTM5MMj3jZtQzj2RzrGMbW8Cx+o2n3h9MfNzAsbzBk8/+a5wCjzfArC+IvB5A/hK0cHlDuH3byCKnvm4zvBxCeuReYvH9Glklw0HsgMNsAr1YpGrUMGqGoNanTqPRpHncotXu0O6c0D7p0hGYeXHeY19tIg09nGTh3QqqqhCLJ4nGU+zGs+wncoT3MlYepHLEU3kSaYVktkDuUKNcLlGpVKgKzGw3a+ykjpAeDNhZXvwgGlWJiYbhnSjJaIxkZI9YeJf0zwiJvQSZbF78VEMrHqGXSpRNWbWKYRjWa7rtY35lK0ium/f49HoJXRxQ8uJS4RBNLVgUzSyYs4qmqRTFKkol3WplikxqYh1XwuaV0Dm7xOr6Jrp+hKIoFITgGiFSNU00M4WaJdT1/lP77UyhIYQnrQaRdAnpxq05Jt76qFd0cvn/hX9F/2S62F35WmjKLOp1TjstIpkyfwBBHya6Au5oGAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7-1\"\n        title=\"7-1\"\n        src=\"/static/b97017b893eee78d9006d024da852760/b97f6/1.png\"\n        srcset=\"/static/b97017b893eee78d9006d024da852760/5a46d/1.png 300w,\n/static/b97017b893eee78d9006d024da852760/0a47e/1.png 600w,\n/static/b97017b893eee78d9006d024da852760/b97f6/1.png 958w\"\n        sizes=\"(max-width: 958px) 100vw, 958px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 953px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABoklEQVQozzWOW08TURRG5+fxqqYRbQqSWKpMywx00mgMMTE+IBI1SIaAKC10SoLlgVrSJtUHMb3N0HtLg7bV8keW5xwyDyvfPnvvs7K1yJcqofSIuaM/BFPXhA5/88gZ89D5x4P0lNnDv9z7fE0gOSaQGt+m4L7oy3kwcyN2p4QyU+aPb9ASa5sk4haxFR3DMtENnUg0QtTUWV6Nqn5M1IbIZXNJzG95GntC4rnFy1drmJahWE2soN15vE3QWCf8fpclO8382x0W3u2xuHXA3MYOYZHmp2Oe7Wd4kTzBOsgST2axUqdYyVOVcdHzay1sbvB6/SOOcyRwsG2bk69Zzs5y5PN5zs8LXFz8Ipf7xk+RzWaTy8sGruvR7Xa5uhoyGo0Uk8kE7W5Q583mNj++lygUCkpSKpUoFotUq1UqlYqiXC6rrNfreJ6L57pK3mq16HQ6St7v99FCM7Psbe3S6XWp1Wpi2cMVH+QF8i0FElcI5KzRaNBqt2kLfFGv12MwGDAcDtEWZwLsf7BptlvqCnmVFPn4Ql8qhVImRb5MIq+Twv9LPp+2WyK1SwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7-2\"\n        title=\"7-2\"\n        src=\"/static/7da9dda9ee887f00540e9781435ea1b7/38124/2.png\"\n        srcset=\"/static/7da9dda9ee887f00540e9781435ea1b7/5a46d/2.png 300w,\n/static/7da9dda9ee887f00540e9781435ea1b7/0a47e/2.png 600w,\n/static/7da9dda9ee887f00540e9781435ea1b7/38124/2.png 953w\"\n        sizes=\"(max-width: 953px) 100vw, 953px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><code class=\"language-text\">mylib.c</code> is a dynamic link library that overrides the <code class=\"language-text\">sleep()</code> function in <code class=\"language-text\">libc</code>.</p>\n<p>Then, set the <code class=\"language-text\">LD PRELOAD</code> environment variable with the following command.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 953px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABPElEQVQY003MSU/CABCG4f5APXhUjEqkQKFaRXGJeiYmxoVAQuIOChivykHinkhbsAuCQgUj+kNeazXGw5OZbzIzQmj3gZEjh9FsC99+k2GXP9fGl3tj6J/BX/9nI/keY8XPn1roMX7ygTC9uEp8SiGihJmcVZCUCONSgPBEiJAc9EhuH50IekKySDAqIkYCTMUVFlbm3RvJI8dkhH5/ksHJBIH1DFIqy3Aihbi1R2Bzl0g6Rzh1iLixw9x2nplMDjlzjLJdJLZ3ylLh7M9y8dwjhGfWSKYPuL0sc1Uuc1EqcX9zw931FWat5qp6LMPAMg2adZtWs4Hz8kyn3abrfHN4e3V473YQ+gb8JFM7GO5ypaKiV6touo6maVRU1aOqGqqbdb1KrfaI4T43TRPTsrAsG9u2qdfrPDUafAHxpB+X83+dgwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7-3\"\n        title=\"7-3\"\n        src=\"/static/da61a84bf8e8254e137939d6a2347d4d/38124/3.png\"\n        srcset=\"/static/da61a84bf8e8254e137939d6a2347d4d/5a46d/3.png 300w,\n/static/da61a84bf8e8254e137939d6a2347d4d/0a47e/3.png 600w,\n/static/da61a84bf8e8254e137939d6a2347d4d/38124/3.png 953w\"\n        sizes=\"(max-width: 953px) 100vw, 953px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>If the <code class=\"language-text\">LD PRELOAD</code> variable is set, the library set in <code class=\"language-text\">LD PRELOAD</code> gets loaded before <code class=\"language-text\">libc</code>. Therefore, if there is a function with the same name, the function in the library set in <code class=\"language-text\">LD PRELOAD</code> gets executed because it if loaded first.</p>\n<p>Write and compile the following program <code class=\"language-text\">myprog.c</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 952px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABpUlEQVQoz3WP7WvTUBSH8x/ug+LUVQsybFmX1iYzGw6VfnIy1IFMQUbZErfBqqvC3Cdf2lqbvqRNmqa2a0fn9A95vDcl4BQ/PJx74J7nd46img1i1oibgrntYYh8X3v9g6vWRWatM67sTJg1z8L39d1z5vZ+hfXG3jnx/Z8o93IbGLpOKpNE1dMk0wvMp26zkE5eQM1MifrkYoKlFY0HuVUyukpaU7mzlEG5nNgknn2K9mqf5a0CxvNtNEE2f4CWL4haQBfcN9/w0HqLsXPIXYl5iGEWMaxiWJctyTuURHadjZd5yuXPlD6V8B0Hr93Gc126njel28Xv+gS9gO/9PsPhkNHJCePRKOR0PBacMplMUC7FFll7sonjtPhwfMTR+yLVcgW7Xse2awI7pC76RqNBq9WiLQI7ItATYV4U6Pv0ej2UWzNx1nOP6XguXyslKl8+Yler1MWwlEQiSbPZFMEOrpBJ/hT1xeaDwQBFnYnxLPcIR3ywbTEshv4nk8jt5FZSFMkkQRBMhSljjRdbu7idNt9qNSGx/xFFNTr37zOlTCK3/A2BpOebJ3zCvgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7-4\"\n        title=\"7-4\"\n        src=\"/static/f912dafc1381ccdecadd007873488220/7e4a6/4.png\"\n        srcset=\"/static/f912dafc1381ccdecadd007873488220/5a46d/4.png 300w,\n/static/f912dafc1381ccdecadd007873488220/0a47e/4.png 600w,\n/static/f912dafc1381ccdecadd007873488220/7e4a6/4.png 952w\"\n        sizes=\"(max-width: 952px) 100vw, 952px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 955px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABgElEQVQY013O30/TUBjG8f553qHXAqPd1q3aTiIwY0zEGy40C1FnIhgNRTY1FYLOLMMLTJisW8varWOwTSHTmPhvfHk3flxw8cn7vDnnPDmKZdfQigPiGz1idpcZkSj0iRVOmRLTF6au7SPap78knH+oH4eknD9MFoco9x8+ZS6TIW3pmHP30K00M2mN5N0kujmiS05gmAlSd+LEDQ1NztWUSmbeYuHRgrxJYVhJpmezKBNantuzzzDy7zBfF1Fzqxiv3mOuFNFfrKG/tMnaWzwpbLPklFl0KmKHxc8751nmY9mXtr9jrVVQzAfL5JZXKG05fNnc5MO6Tbn0lcq3EvWfVao/dqlV98aiMGRwdMiv4yNO+j1OB/2xE/F/+JvdRhflxi2V3PNVmkGT/ZpLvdEYc+t1PM/H88/5/oHwOWg2CaQ4bLVotdu0o0hmxKDXpbQXoiRvxnibfyMXQlzXpSFlI57nXeXLfVQYBAEtKWtLWSRlnU6HqHMoPz2mvB9xBuw/YK984OT5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7-5\"\n        title=\"7-5\"\n        src=\"/static/f2c7e207f52f675c907bf3c9a6aa88da/a0b80/5.png\"\n        srcset=\"/static/f2c7e207f52f675c907bf3c9a6aa88da/5a46d/5.png 300w,\n/static/f2c7e207f52f675c907bf3c9a6aa88da/0a47e/5.png 600w,\n/static/f2c7e207f52f675c907bf3c9a6aa88da/a0b80/5.png 955w\"\n        sizes=\"(max-width: 955px) 100vw, 955px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Run <code class=\"language-text\">myprog</code> in the following 4 conditions.</p>\n<blockquote>\n<ol>\n<li>Make <code class=\"language-text\">myprog</code>a regular program, and run it as a normal user.</li>\n</ol>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 946px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABPUlEQVQY003NSUsCcQCG8fmGQQdbrSgyx2l0XCpoIehSoRQRtEiRjlFRNje7GrhOg+iYlRtT1Ad5+s8cosOP97090ky6xnRugF/vMXH14ZnJ9RnPfeLTHcZ0sVlH/E/P2D/j119M3nwzJfhvf5i9+0HS1pOsxWKo0RBaQkPRFAJKACUio2ohlLAsBFEjgtiQSw0iLy8RX9XY3tkkElcJx1SiKxGkkYVjJsK7LBycIp/k8O+fMH94Ib7OXCrN8vkNsct7NjL3bOl5Epk88czjn0TW+NsV3UBajCbZS51h5B8wDINsJkuh8MRzsYhpmjSbTdq2jW236bx2eH97p9vt0u/1GfRdA4YD1xDHcZBGfQGOjtNYLyblcplKpUK1WqVUKlGv16nVah73uwHLsmg0Gl6o1Wp5bBFst0Ww88ov2rsfD7S59Q0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7-6\"\n        title=\"7-6\"\n        src=\"/static/8b7222fefeb7a7cbdb8da6f0854aee04/36c33/6.png\"\n        srcset=\"/static/8b7222fefeb7a7cbdb8da6f0854aee04/5a46d/6.png 300w,\n/static/8b7222fefeb7a7cbdb8da6f0854aee04/0a47e/6.png 600w,\n/static/8b7222fefeb7a7cbdb8da6f0854aee04/36c33/6.png 946w\"\n        sizes=\"(max-width: 946px) 100vw, 946px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>We can see that the <code class=\"language-text\">sleep()</code> function in the dynamic link library <code class=\"language-text\">mylib.c</code> has been executed. This is because the library has been set in the <code class=\"language-text\">LD_PRELOAD</code> environment variable.</p>\n<blockquote>\n<ol start=\"2\">\n<li>Make <code class=\"language-text\">myprog</code> a Set-UID root program, and run it as a normal user.</li>\n</ol>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 957px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABq0lEQVQoz12NW28SURRG5/f5VNAYTEx8aS0gwrRq21iNSVGjxMdWCMQocxFTxFqoraAFBhLLdYDBllouKi2/YzkzlBcfVtZ39s75tuCSBtxUf3NDHuKShmYecV0Z45TPuaacc9XyZXZKYxzxv8yZnjNnTnWCU5ngUC5wJSZceTdGWF9dRfQvIopeAn43d7zziAE395a8LIseli+9ZGX7PbW1fxZcZ+PJGisPAjxa8bGw9hThlvgKz9Zb7r5J4ot9YH4zzsKmNPXW1P6wxP2ogi+icPu1zGJYsXFHVDyR92ZW8cdUHKEEQvBFmNRump30HsmdXbY/feZQK5Pe/0rmIMt+7jtfsjmy3w4xjnscn55xcjbgtD+0+TUYcdIfMbkYkyj8RHj4+DmKJKEqMrFo1CRGKvWRZHKbvUyGklYkn89TKOSpVas0mw1aepN2q0WnbdGmbTLsdYkf1BBeboT4UamgaRrFYhGtVKJULlM1P9dqNZt6vU6j0bCt6zots8yi0+lgdLt0jC5/+j3knI4QDoZomovK0ZFdMiuqmEdmzOZW4azILjMMuv8V/gOJraH6O7BdPQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7-7\"\n        title=\"7-7\"\n        src=\"/static/1568affba5f90046ad4ffc7fa6b0c24d/6bff2/7.png\"\n        srcset=\"/static/1568affba5f90046ad4ffc7fa6b0c24d/5a46d/7.png 300w,\n/static/1568affba5f90046ad4ffc7fa6b0c24d/0a47e/7.png 600w,\n/static/1568affba5f90046ad4ffc7fa6b0c24d/6bff2/7.png 957w\"\n        sizes=\"(max-width: 957px) 100vw, 957px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>This time, <code class=\"language-text\">myprog</code> has been set as a Set-UID program owned by root, and has been run by a normal user <code class=\"language-text\">seed</code>. The <code class=\"language-text\">sleep()</code> function in the dynamic link library <code class=\"language-text\">mylib.c</code> has not been executed. This is because due to a countermeasure implemented by the dynamic linker, it ignores the <code class=\"language-text\">LD_PRELOAD</code> and <code class=\"language-text\">LD_LIBRARY_PATH</code> environment variables when the EUID and RUID differ.</p>\n<blockquote>\n<ol start=\"3\">\n<li>Make <code class=\"language-text\">myprog</code> a Set-UID root program, export the <code class=\"language-text\">LD_PRELOAD</code> environment variable again in the root account and run it.</li>\n</ol>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 955px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABsElEQVQoz12PTU8aURhG5+c16aoNRlvc2BpEPgYUqTHWJixMamxrTImpRBCEDIax42iiNMIGVD5DYWbSsaJYN/0dp3cmpYsuTp773tz35LmSL93gRe4n3v0bJtM/mBK8zNhM7N/j+Y+J7MhlPE/mHpjKP7o5nX/Ak/uFFF/7wHIsRnghgLwUJSKQYxGRMqFoUNwHiQiiiyHC0XlCsp95gT88R3xlibXEqngvsxALMhtfRXo2m8QbeY9vO0Vgp8CrjylCXxT8yRwz4vx6aw/5c4bA1i4r6UMSxVOW8/pfjt18c3DMW0XHt6sjzS1usr6R5FApUFQU9lIpjtQj1FIJXdMon5f5Vi67eVmvYwwGWKbJjW1zNxy6DId3/H4cUWnbSM+9Id4lNshmsxzkC2QyGZRiEf3kBE0ILy4qVCoV6kJWrVap1WpcX1/RarcZCLlDf2Bwa1uc1r4jzTyd5tP6Jpquo33VKIlmqqq6i22x1Ol06Ha7bvZ6Pfr9PoZh/MMUbQ3TYnRrc3ZliC8/8ZDe3qFvGjQbDVfSarVoNptujhnLHanTyhE5WJblCu8d4aXBH4KAmya1SbdaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7-8\"\n        title=\"7-8\"\n        src=\"/static/f009719e3b12fac3673dbcf4063c9c3f/a0b80/8.png\"\n        srcset=\"/static/f009719e3b12fac3673dbcf4063c9c3f/5a46d/8.png 300w,\n/static/f009719e3b12fac3673dbcf4063c9c3f/0a47e/8.png 600w,\n/static/f009719e3b12fac3673dbcf4063c9c3f/a0b80/8.png 955w\"\n        sizes=\"(max-width: 955px) 100vw, 955px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>This time, <code class=\"language-text\">myprog</code> has been set as a Set-UID program owned by root, and has been run by <code class=\"language-text\">root</code>. The <code class=\"language-text\">sleep()</code> function in the dynamic link library <code class=\"language-text\">mylib.c</code> has been executed, since the EUID and RUID are equal.</p>\n<blockquote>\n<ol start=\"4\">\n<li>Make <code class=\"language-text\">myprog</code> a Set-UID user1 program, export the <code class=\"language-text\">LD_PRELOAD</code> environment variable again in a different user’s account (not-root user) and run it.</li>\n</ol>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 953px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABQklEQVQY0y2MuU4CYRhF5w1tRBSDiUqhgDPDJjEuUWNiMGojm2JkG3SAQa2ggEIKIgUQNgsDGeFJjj9LcXLvt+RIW5Ev1p5/WE8MsDz2WY33sGd+2dAmrAvmmV30BVOxm2LN/s2Z3awZE1vWxP46QQqc3RL0+5G9bmSfghrwoIj0BFQOPC5kjxtFpLJMWXXiFrgUJ0cnQU7Pj1H9i39f0Iu0shtmU7nGcR9jL5xh5+4JV0wTPcW26LPZG00jP7ygRpIcJnLsh9MoCR1/qoQvZeBLGqIL0iUkh3LDVSiM/pZD13XisTjvH58YhkGhUCSfL1AsFsUtT7lcod3p0Gq1GQyGjEajJWPG4zGmaSJZbE4uLkPktCyaphGNRikIwUwyk1UqFSEqU6vVqFar1Ot1Go0GzeY33W53Tq/Xo9/vMxwO+QdtBRhVNKNwHAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"7-9\"\n        title=\"7-9\"\n        src=\"/static/dda23e5a9620db6e347fbe7a6d343726/38124/9.png\"\n        srcset=\"/static/dda23e5a9620db6e347fbe7a6d343726/5a46d/9.png 300w,\n/static/dda23e5a9620db6e347fbe7a6d343726/0a47e/9.png 600w,\n/static/dda23e5a9620db6e347fbe7a6d343726/38124/9.png 953w\"\n        sizes=\"(max-width: 953px) 100vw, 953px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>This time, <code class=\"language-text\">myprog</code> has been set as a Set-UID program owned by <code class=\"language-text\">user1</code>, and has been run by another normal user <code class=\"language-text\">seed</code>. The <code class=\"language-text\">sleep()</code> function in the dynamic link library <code class=\"language-text\">mylib.c</code> has not been executed, since the EUID and RUID are different.</p>","frontmatter":{"title":"[SEED labs] Environment Variable and Set-UID Program Lab (2)","date":"December 02, 2021"}}},"pageContext":{"slug":"/SEEDlabs/environmentvariables/","previous":{"fields":{"slug":"/SEEDlabs/setUID/"},"frontmatter":{"title":"[SEED labs] Environment Variable and Set-UID Program Lab (1)"}},"next":{"fields":{"slug":"/SEEDlabs/bufferoverflow/"},"frontmatter":{"title":"[SEED labs] Buffer Overflow Vulnerability Lab"}}}},"staticQueryHashes":["2486386679","3128451518"]}